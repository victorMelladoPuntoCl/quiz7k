(()=>{"use strict";let e={currentScore:0,totalScore:0,totalQuizQuestions:0,score:0,results:[],currentPosition:0,userAnswers:[]};const n=[],t=()=>e,s=t=>{e={...e,...t},n.forEach((n=>n(e))),console.log("setState : currentPosition:"+e.currentPosition+" -  score:"+e.score)},o=e=>{n.push(e)},i=[{questionID:"1",trackProgress:[1],questionType:"multiple-choice",question:"¿Cuál de las siguientes alternativas son las contraindicaciones en la Reflexología?",answers:{a:"Durante el embarazo",b:"En caso de hongos, heridas o cualquier tipo de erupción",c:"En enfermedades en estado febril elevado",d:"Parálisis"},correctAnswers:["b","c"]},{questionID:"2",trackProgress:[1],questionType:"multiple-choice",question:"¿La Reflexología que enseñamos no es más que…?",answers:{a:"Una terapia complementaria a las indicaciones del médico",b:"Es una alternativa a la automedicación",c:"Trabajamos con la homeostasis",d:"Tiene un efecto benéfico sobre todas las partes del cuerpo"},correctAnswers:["c","d"]},{questionID:"3",trackProgress:[1],questionType:"single-choice",question:"Unos de los personajes más influyentes en La Historia de la reflexología a nivel occidental fue:",answers:{a:"Edwin Bowers",b:"Joseph Shelvy",c:"Dwight Byers",d:"Fitzgerald"},correctAnswers:["d"]},{questionID:"3",trackProgress:[1],questionType:"single-choice",question:"Unos de los personajes más influyentes en La Historia de la reflexología a nivel occidental fue:",answers:{a:"Edwin Bowers",b:"Joseph Shelvy",c:"Dwight Byers",d:"Fitzgerald"},correctAnswers:["d"]},{questionID:"3",trackProgress:[1],questionType:"single-choice",question:"Unos de los personajes más influyentes en La Historia de la reflexología a nivel occidental fue:",answers:{a:"Edwin Bowers",b:"Joseph Shelvy",c:"Dwight Byers",d:"Fitzgerald"},correctAnswers:["d"]},{questionID:"4",trackProgress:[1],questionType:"single-choice",question:"¿Cómo funciona la reflexología según la ciencia?",answers:{a:"Estímulo y respuesta a través de las terminaciones nerviosas",b:"La circulación sanguínea",c:"Estimulo de la piel",d:"Alternativa a y b"},correctAnswers:["a"]},{questionID:"6",trackProgress:[0],questionType:"feedback-slide",question:"---",answers:{a:"-",b:"-o",c:"-",d:"-"},correctAnswers:["-","-"],lastIntentCheck:{correct:["-","-"],incorrect:[],questionResult:["--"]}}];function c(e,n,t){if(console.log("nextslide \n currentArray.length = "+e.length),console.log("currentPosition = "+n),console.log(n<e.length-1),n<e.length-1){let e=n+1;return r(e,0,t),e}return n}function r(e,n,t){t.style.transform=`translateX(-${100*e}%)`,console.log("updateSlide newPosition: "+e)}document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"})),window.onclick=function(e){const n=document.querySelector(".modal");e.target==n&&(n.style.display="none")};let l=t().currentPosition;const a=document.querySelector(".slider"),u=document.getElementById("prev"),d=document.getElementById("next"),p=document.getElementById("continueButton");console.log("Documento cargado"),p.addEventListener("click",(function(){l=c(i,l,a),document.querySelector(".feedback").classList.add("hidden"),document.querySelector(".question-"+l).classList.add("active"),console.log("nextSlide terminado. currentPosition : "+l);let e=t();e.currentPosition=l,s(e)})),d.addEventListener("click",(function(){l=c(i,l,a),console.log("nextSlide terminado. currentPosition : "+l)})),u.addEventListener("click",(function(){l=function(e,n,t){if(console.log("-----"+n),n>0){let e=n-1;return console.log("prevSlide | "+n+" > "+e),console.log("updateSlide newPosition: "+e),r(e,0,t),e}return n}(0,l,a),console.log("nextSlide terminado. currentPosition : "+l)})),function(e,n){console.log("myQuestions.length = "+e.length);let i=t(),c=0;e.forEach((function(e,t){let r=document.createElement("div");switch(r.className="slide question-"+t,r.setAttribute("data-slide",t),e.questionType){case"multiple-choice":case"single-choice":r.innerHTML=(({question:e,index:n})=>`\n<div class="sup"><h2>${e.question}</h2></div>\n<div class="quiz-form-container">\n</div>\n    <form id="${n}" class="question-options">\n        \n        <span class="deco-top"></span>\n        <ul>\n        \n            ${Object.entries(e.answers).map((([t,s])=>`\n                <li><label for="${n}-${t}" class="option">\n                    <input type="${"single-choice"===e.questionType?'radio" name="group-question-'+e.questionID:"checkbox"}" id="${n}-${t}" value="${t}" group="">\n                    <p>${s}</p>\n                    </label>\n                </li>\n            `)).join("")}\n        </ul>\n\n        <input type="hidden" name="questionID" value="${n}" class="questionID">\n        <input type="hidden" name="questionIndex" value="${n}" class="questionIndex">\n        <div class="questionFt">\n        <button type="submit" class="submitButton main-button">COMPROBAR</button>\n        </div>\n    </form>\n`)({question:e,index:t}),c+=1;break;case"feedback-slide":r.innerHTML=function(e){function n(e){let n=e.totalQuizQuestions,t=e.score,s="";s=n==t?"¡Muy bien!":"¡Vuelve a intentarlo!";let o=`\n        <div class="sup">\n        <h2 class=''>Tu resultado:</h2>\n        <h2 class='quiz-result'>Preguntas totales:${n}</h2>\n        <h2 class='quiz-result'>Respuestas correctas: ${t}<h2>\n        <h2 class='quiz-result-text'>${s}</h2>\n        <button class="main-button" onclick="location.reload()">REINICIAR</button>\n        </div>\n        `;return console.log(o),o}return o(n),n(e)}(i);break;default:console.log("Error: no se reconoce el tipo de pregunta.")}console.log("totalQuizQuestions = "+c),i.totalQuizQuestions=c,s(i),n.appendChild(r)})),document.querySelectorAll(".question-options").forEach(((n,o)=>{n.addEventListener("submit",(function(i){i.preventDefault();const c=Array.from(n.querySelectorAll("input:checked")).map((e=>e.value));console.log("userAnswers = "+c);let r=e[o].correctAnswers;!function(e,n,o,i,c){let r=[],l=[],a="",u=n[i].questionID,d=i,p=t(),m=p.score;if(0===o.length)return void alert("Por favor elija una opción");Object.keys(n[i].answers).sort(),o.sort(),c.sort(),JSON.stringify(o)===JSON.stringify(c)?(a="correct",p.score++):a="incorrect",p.results.push(a),o.forEach((e=>{c.includes(e)?r.push(e):l.push(e)}));let g={questionID:u,questionKey:d,userAnswers:o,score:m,correctQuestionAnswers:c,correct:r,incorrect:l,questionResult:a};s(p),function(e){let n=e,t=document.getElementById(e.questionKey),s=document.querySelector(".feedback");s.classList.remove("hidden"),s.classList.add("animate__animated","animate__bounceIn"),s.querySelector(".feedback-text").textContent="correct"===n.questionResult?"¡Excelente!":"Tienes respuestas incorrectas, te recomendamos revisar el contenido y reintentar.";let o=t.querySelectorAll("ul input"),i=e.correctQuestionAnswers,c=e.correct,r=e.incorrect;console.log(c),o.forEach((e=>{e.checked&&c.includes(e.value)&&e.classList.add("correct"),e.checked&&r.includes(e.value)&&e.classList.add("incorrect"),0==e.checked&&i.includes(e.value)&&(console.log("faltó marcar: "+e.value),e.classList.add("incorrect-unchecked"))}))}(g)}(i.target,e,c,o,r)}))}))}(i,a),(e=>{e.forEach((e=>{if("feedback-slide"!=e.questionType){const e=document.createElement("li");e.classList.add("step"),document.querySelector(".progressbar").appendChild(e)}}))})(i),o((()=>{document.querySelectorAll(".step").forEach(((e,n)=>{const s=t().results[n];s&&e.classList.add(s)}))}))})();